<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ PADER Matchmaking AI - Gu√≠a Visual</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            line-height: 1.6;
            color: #2d3748;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .header p {
            font-size: 1.3em;
            opacity: 0.95;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            border-radius: 15px;
            padding: 30px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .section:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 2em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-subtitle {
            font-size: 1.5em;
            margin: 25px 0 15px 0;
            color: #4a5568;
            border-left: 4px solid currentColor;
            padding-left: 15px;
        }

        /* Colores pasteles para secciones */
        .bg-pink { background-color: #FFE5E5; border-left: 5px solid #ff9999; }
        .bg-blue { background-color: #E5F6FF; border-left: 5px solid #66b3ff; }
        .bg-green { background-color: #E5FFE5; border-left: 5px solid #66ff99; }
        .bg-orange { background-color: #FFF5E5; border-left: 5px solid #ffb366; }
        .bg-purple { background-color: #F5E5FF; border-left: 5px solid #cc99ff; }
        .bg-yellow { background-color: #FFFFE5; border-left: 5px solid #ffff66; }
        .bg-cyan { background-color: #E5FFFF; border-left: 5px solid #66ffff; }
        .bg-peach { background-color: #FFE5CC; border-left: 5px solid #ff9966; }

        .flow-diagram {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .flow-step {
            display: flex;
            align-items: center;
            margin: 15px 0;
            padding: 15px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 8px;
            position: relative;
        }

        .flow-step::after {
            content: '‚Üì';
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
            color: #667eea;
            font-weight: bold;
        }

        .flow-step:last-child::after {
            content: '';
        }

        .flow-number {
            background: #667eea;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .code-block .keyword { color: #569cd6; }
        .code-block .string { color: #ce9178; }
        .code-block .comment { color: #6a9955; }
        .code-block .function { color: #dcdcaa; }
        .code-block .number { color: #b5cea8; }

        .info-box {
            background: #f7fafc;
            border-left: 4px solid #4299e1;
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .warning-box {
            background: #fffaf0;
            border-left: 4px solid #f6ad55;
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .success-box {
            background: #f0fff4;
            border-left: 4px solid #48bb78;
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 20px 0;
        }

        .card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .card h3 {
            margin-bottom: 10px;
            color: #667eea;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #e2e8f0;
        }

        tr:hover {
            background: #f7fafc;
        }

        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin: 3px;
        }

        .badge-primary { background: #e5f6ff; color: #2c5aa0; }
        .badge-success { background: #e5ffe5; color: #2d7738; }
        .badge-warning { background: #fff5e5; color: #975a16; }
        .badge-danger { background: #ffe5e5; color: #c53030; }

        .timeline {
            position: relative;
            padding-left: 40px;
            margin: 30px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -33px;
            top: 25px;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: #667eea;
            border: 3px solid white;
            box-shadow: 0 0 0 3px #667eea;
        }

        .architecture-diagram {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }

        .arch-box {
            display: inline-block;
            background: white;
            padding: 20px 30px;
            margin: 10px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            min-width: 150px;
        }

        .arch-arrow {
            font-size: 2em;
            color: #667eea;
            margin: 0 10px;
        }

        ul, ol {
            margin-left: 25px;
            margin-top: 10px;
        }

        li {
            margin: 8px 0;
        }

        strong {
            color: #2d3748;
        }

        .highlight {
            background: linear-gradient(120deg, #f6e05e 0%, #f6e05e 100%);
            background-repeat: no-repeat;
            background-size: 100% 40%;
            background-position: 0 85%;
            padding: 2px 4px;
        }

        @media (max-width: 768px) {
            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2em;
            }

            .content {
                padding: 20px;
            }
        }

        .toc {
            background: #f7fafc;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .toc h2 {
            margin-bottom: 15px;
            color: #667eea;
        }

        .toc ul {
            list-style: none;
            margin: 0;
        }

        .toc li {
            margin: 8px 0;
        }

        .toc a {
            color: #4a5568;
            text-decoration: none;
            transition: color 0.3s;
        }

        .toc a:hover {
            color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ PADER Matchmaking AI</h1>
            <p>Gu√≠a Visual Completa - De la Idea al C√≥digo</p>
        </div>

        <div class="content">
            <!-- Tabla de Contenidos -->
            <div class="toc">
                <h2>üìë √çndice de Contenidos</h2>
                <ul>
                    <li>üéØ <a href="#problema">El Problema y La Soluci√≥n</a></li>
                    <li>üèóÔ∏è <a href="#arquitectura">Arquitectura del Sistema</a></li>
                    <li>üîÑ <a href="#flujo-principal">Flujo Principal de Matchmaking</a></li>
                    <li>üìä <a href="#modelos">Modelos de Datos</a></li>
                    <li>ü§ñ <a href="#embeddings">Sistema de Embeddings IA</a></li>
                    <li>‚ö° <a href="#scoring">Algoritmo de Scoring</a></li>
                    <li>üë• <a href="#teams">Divisi√≥n de Trabajo (4 Teams)</a></li>
                    <li>üîó <a href="#integracion">Integraci√≥n de Componentes</a></li>
                    <li>üöÄ <a href="#roadmap">Roadmap de Evoluci√≥n</a></li>
                    <li>‚úÖ <a href="#checklist">Checklist de Desarrollo</a></li>
                </ul>
            </div>

            <!-- Secci√≥n 1: Problema y Soluci√≥n -->
            <div id="problema" class="section bg-pink">
                <h2 class="section-title">üéØ El Problema y La Soluci√≥n</h2>
                
                <h3 class="section-subtitle">‚ùå Problema Actual</h3>
                <div class="warning-box">
                    <strong>Frustraci√≥n de usuarios:</strong> Cuando un jugador crea un partido de p√°del necesita 3 jugadores m√°s para completar el cupo. Actualmente debe:
                    <ul>
                        <li>Buscar manualmente en listas de 500+ jugadores</li>
                        <li>Enviar invitaciones sin saber qui√©n es compatible</li>
                        <li>Esperar respuestas que pueden no llegar</li>
                        <li>Repetir el proceso si alguien rechaza</li>
                    </ul>
                    <strong>Resultado:</strong> Solo 40% de matches se completan, toma 2+ horas, partidos desbalanceados.
                </div>

                <h3 class="section-subtitle">‚úÖ Soluci√≥n con IA</h3>
                <div class="success-box">
                    <strong>Matchmaking Autom√°tico e Inteligente:</strong>
                    <ul>
                        <li>üß† <strong>IA analiza</strong> compatibilidad usando embeddings sem√°nticos</li>
                        <li>üéØ <strong>Predice</strong> qu√© jugadores son m√°s compatibles</li>
                        <li>‚ö° <strong>Prioriza</strong> jugadores confiables (alta tasa de aceptaci√≥n)</li>
                        <li>üöÄ <strong>Env√≠a invitaciones autom√°ticamente</strong> a top 20 candidatos</li>
                    </ul>
                    <strong>Resultado:</strong> 85%+ de matches completados en <15 minutos.
                </div>

                <div class="grid-2">
                    <div class="card">
                        <h3>üêå Antes (Manual)</h3>
                        <ul>
                            <li>‚è±Ô∏è 2 horas promedio</li>
                            <li>üìâ 40% tasa de √©xito</li>
                            <li>üò§ Usuarios frustrados</li>
                            <li>üé≤ Matches al azar</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>üöÄ Despu√©s (IA)</h3>
                        <ul>
                            <li>‚ö° 15 minutos promedio</li>
                            <li>üìà 85%+ tasa de √©xito</li>
                            <li>üòä Usuarios satisfechos</li>
                            <li>üéØ Matches inteligentes</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Secci√≥n 2: Arquitectura -->
            <div id="arquitectura" class="section bg-blue">
                <h2 class="section-title">üèóÔ∏è Arquitectura del Sistema</h2>
                
                <div class="architecture-diagram">
                    <div style="margin-bottom: 30px;">
                        <div class="arch-box" style="background: #FFE5E5;"><strong>PADER Server</strong><br>(Node.js)</div>
                    </div>
                    <div class="arch-arrow">‚Üì HTTP Request</div>
                    <div style="margin: 30px 0;">
                        <div class="arch-box" style="background: #E5F6FF;"><strong>Matchmaking IA</strong><br>(FastAPI Python)</div>
                    </div>
                    <div class="arch-arrow">‚Üì Consultas</div>
                    <div>
                        <div class="arch-box" style="background: #E5FFE5;"><strong>Pinecone</strong><br>Vector DB</div>
                        <span class="arch-arrow">+</span>
                        <div class="arch-box" style="background: #FFF5E5;"><strong>PostgreSQL</strong><br>M√©tricas</div>
                        <span class="arch-arrow">+</span>
                        <div class="arch-box" style="background: #F5E5FF;"><strong>OpenAI</strong><br>Embeddings</div>
                    </div>
                </div>

                <h3 class="section-subtitle">Capas de la Aplicaci√≥n</h3>
                <table>
                    <tr>
                        <th>Capa</th>
                        <th>Responsabilidad</th>
                        <th>Archivos</th>
                    </tr>
                    <tr>
                        <td><strong>Presentation</strong></td>
                        <td>Recibir HTTP requests, validar, responder</td>
                        <td>src/routers/matchmaking.py</td>
                    </tr>
                    <tr>
                        <td><strong>Business</strong></td>
                        <td>L√≥gica de matchmaking y scoring</td>
                        <td>src/services/matchmaking_service.py<br>src/services/scoring_service.py</td>
                    </tr>
                    <tr>
                        <td><strong>External</strong></td>
                        <td>Comunicaci√≥n con APIs externas</td>
                        <td>src/external/openai_client.py<br>src/external/pinecone_client.py</td>
                    </tr>
                    <tr>
                        <td><strong>Domain</strong></td>
                        <td>Modelos de datos (Pydantic)</td>
                        <td>src/models/player.py<br>src/models/match_request.py<br>src/models/candidate.py</td>
                    </tr>
                </table>
            </div>

            <!-- Secci√≥n 3: Flujo Principal -->
            <div id="flujo-principal" class="section bg-green">
                <h2 class="section-title">üîÑ Flujo Principal de Matchmaking</h2>
                
                <div class="flow-diagram">
                    <div class="flow-step">
                        <div class="flow-number">1</div>
                        <div>
                            <strong>Request llega a FastAPI</strong>
                            <br>POST /api/matchmaking/find_candidates con MatchRequest
                        </div>
                    </div>

                    <div class="flow-step">
                        <div class="flow-number">2</div>
                        <div>
                            <strong>Crear embedding del request</strong>
                            <br>OpenAI genera vector de 1536 dimensiones capturando requisitos del partido
                        </div>
                    </div>

                    <div class="flow-step">
                        <div class="flow-number">3</div>
                        <div>
                            <strong>B√∫squeda vectorial en Pinecone</strong>
                            <br>Encuentra top 50 jugadores m√°s similares usando cosine similarity
                        </div>
                    </div>

                    <div class="flow-step">
                        <div class="flow-number">4</div>
                        <div>
                            <strong>Filtrado estricto</strong>
                            <br>Aplicar filtros obligatorios: ELO range, edad, g√©nero, categor√≠a
                        </div>
                    </div>

                    <div class="flow-step">
                        <div class="flow-number">5</div>
                        <div>
                            <strong>Enriquecer con m√©tricas de DB</strong>
                            <br>PostgreSQL: acceptance_rate, last_active_days para cada candidato
                        </div>
                    </div>

                    <div class="flow-step">
                        <div class="flow-number">6</div>
                        <div>
                            <strong>Calcular scoring final</strong>
                            <br>Algoritmo multi-dimensional: 6 factores con pesos espec√≠ficos
                        </div>
                    </div>

                    <div class="flow-step">
                        <div class="flow-number">7</div>
                        <div>
                            <strong>Ordenar y retornar</strong>
                            <br>Top 20 candidatos ordenados por score + acceptance_rate
                        </div>
                    </div>

                    <div class="flow-step">
                        <div class="flow-number">8</div>
                        <div>
                            <strong>PADER env√≠a invitaciones autom√°ticamente</strong>
                            <br>Notificaciones push con mensajes personalizados: "Partido compatible - 95% match"
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>‚ö° Performance esperado:</strong> Todo el proceso debe completarse en <200ms para garantizar una experiencia fluida.
                </div>
            </div>

            <!-- Secci√≥n 4: Modelos de Datos -->
            <div id="modelos" class="section bg-orange">
                <h2 class="section-title">üìä Modelos de Datos (Pydantic)</h2>

                <h3 class="section-subtitle">Player Model</h3>
                <div class="code-block">
<span class="keyword">class</span> <span class="function">Player</span>(BaseModel):
    id: <span class="keyword">str</span>                    <span class="comment"># UUID</span>
    name: <span class="keyword">str</span>                  <span class="comment"># Nombre completo</span>
    elo: <span class="keyword">int</span>                   <span class="comment"># 800-3300+ (ranking num√©rico)</span>
    age: <span class="keyword">int</span>                   <span class="comment"># 18-60</span>
    gender: <span class="keyword">Literal</span>[<span class="string">"MALE"</span>, <span class="string">"FEMALE"</span>]
    category: CategoryEnum      <span class="comment"># NINTH, EIGHTH, SEVENTH, SIXTH, FIFTH, FOURTH, THIRD, SECOND, FIRST</span>
    positions: List[PositionEnum]  <span class="comment"># [FOREHAND, BACKHAND]</span>
    location: LocationDict      <span class="comment"># {lat, lon, zone}</span>
    availability: Optional[List[TimeSlot]] = <span class="keyword">None</span>
    acceptance_rate: <span class="keyword">float</span>     <span class="comment"># 0.0-1.0 (qu√© % de invitaciones acepta)</span>
    last_active_days: <span class="keyword">int</span>      <span class="comment"># D√≠as desde √∫ltima actividad</span>
                </div>

                <h3 class="section-subtitle">MatchRequest Model</h3>
                <div class="code-block">
<span class="keyword">class</span> <span class="function">MatchRequest</span>(BaseModel):
    match_id: <span class="keyword">str</span>              <span class="comment"># UUID del partido</span>
    categories: List[CategoryEnum]  <span class="comment"># ["SEVENTH", "SIXTH"] - categor√≠as aceptadas</span>
    elo_range: Tuple[<span class="keyword">int</span>, <span class="keyword">int</span>]   <span class="comment"># (1400, 1800) - rango aceptado</span>
    age_range: Optional[Tuple[<span class="keyword">int</span>, <span class="keyword">int</span>]] = <span class="keyword">None</span>
    gender_preference: GenderPreference  <span class="comment"># MALE, FEMALE, MIXED</span>
    required_players: <span class="keyword">int</span>      <span class="comment"># 1-3 jugadores necesarios</span>
    location: LocationDict       <span class="comment"># Ubicaci√≥n del partido</span>
    match_time: <span class="keyword">str</span>            <span class="comment"># "19:00" formato 24h</span>
    required_time: <span class="keyword">int</span>         <span class="comment"># 90 minutos de duraci√≥n</span>
    preferred_position: Optional[PositionEnum] = <span class="keyword">None</span>
                </div>

                <h3 class="section-subtitle">Candidate Model</h3>
                <div class="code-block">
<span class="keyword">class</span> <span class="function">Candidate</span>(BaseModel):
    player_id: <span class="keyword">str</span>
    player_name: <span class="keyword">str</span>
    score: <span class="keyword">float</span>                  <span class="comment"># 0.0-1.0 (score total de compatibilidad)</span>
    distance_km: <span class="keyword">float</span>            <span class="comment"># Distancia al partido</span>
    elo: <span class="keyword">int</span>
    elo_diff: <span class="keyword">int</span>                 <span class="comment"># Diferencia absoluta de ELO</span>
    acceptance_rate: <span class="keyword">float</span>
    reasons: List[<span class="keyword">str</span>]             <span class="comment"># ["Perfil muy compatible", "Nivel similar"]</span>
    invitation_message: <span class="keyword">str</span>       <span class="comment"># Mensaje personalizado</span>
    compatibility_summary: <span class="keyword">str</span>    <span class="comment"># Resumen breve</span>
                </div>
            </div>

            <!-- Secci√≥n 5: Embeddings IA -->
            <div id="embeddings" class="section bg-purple">
                <h2 class="section-title">ü§ñ Sistema de Embeddings con OpenAI</h2>

                <div class="info-box">
                    <strong>üß† ¬øQu√© son embeddings?</strong> Son vectores de 1536 n√∫meros que capturan la "esencia" sem√°ntica de un jugador o partido. Jugadores similares tendr√°n vectores cercanos en el espacio vectorial.
                </div>

                <h3 class="section-subtitle">Construcci√≥n del texto descriptivo para Player</h3>
                <div class="code-block">
<span class="keyword">def</span> <span class="function">_build_player_description</span>(player: Player) -> <span class="keyword">str</span>:
    parts = [
        <span class="string">f"Jugador de p√°del categor√≠a {player.category}"</span>,
        <span class="string">f"ELO {player.elo}"</span>,
        <span class="string">f"Edad {player.age} a√±os"</span>,
        <span class="string">f"G√©nero {player.gender}"</span>,
        <span class="string">f"Juega de {' y '.join(player.positions)}"</span>,
        <span class="string">f"Zona {player.location['zone']}"</span>,
    ]
    
    <span class="keyword">if</span> player.availability:
        times = [<span class="string">f"{slot['min']}-{slot['max']}"</span> <span class="keyword">for</span> slot <span class="keyword">in</span> player.availability]
        parts.append(<span class="string">f"Disponible {', '.join(times)}"</span>)
    
    <span class="comment"># Agregar contexto de comportamiento</span>
    <span class="keyword">if</span> player.acceptance_rate > <span class="number">0.8</span>:
        parts.append(<span class="string">"Jugador muy confiable y activo"</span>)
    
    <span class="keyword">return</span> <span class="string">". "</span>.join(parts)
                </div>

                <h3 class="section-subtitle">Llamada a OpenAI API</h3>
                <div class="code-block">
response = openai_client.embeddings.create(
    model=<span class="string">"text-embedding-3-small"</span>,
    input=description_text,
    encoding_format=<span class="string">"float"</span>
)
embedding = response.data[<span class="number">0</span>].embedding  <span class="comment"># List[float] de 1536 dims</span>
                </div>

                <h3 class="section-subtitle">Indexaci√≥n en Pinecone</h3>
                <div class="code-block">
vector_store.upsert_player(
    player_id=player.id,
    embedding=embedding,
    metadata={
        <span class="string">"elo"</span>: player.elo,
        <span class="string">"category"</span>: player.category,
        <span class="string">"gender"</span>: player.gender,
        <span class="string">"zone"</span>: player.location[<span class="string">'zone'</span>]
    }
)
                </div>

                <div class="success-box">
                    <strong>‚ú® Ventaja clave:</strong> Los embeddings capturan patrones sutiles que reglas simples no pueden. Por ejemplo, dos jugadores defensivos son compatibles aunque tengan ELOs diferentes.
                </div>
            </div>

            <!-- Secci√≥n 6: Algoritmo de Scoring -->
            <div id="scoring" class="section bg-yellow">
                <h2 class="section-title">‚ö° Algoritmo de Scoring Multi-Dimensional</h2>

                <div class="info-box">
                    <strong>üéØ Objetivo:</strong> Combinar m√∫ltiples factores en un score final (0.0 - 1.0) que representa la calidad del match.
                </div>

                <h3 class="section-subtitle">Factores y Pesos</h3>
                <table>
                    <tr>
                        <th>Factor</th>
                        <th>Peso</th>
                        <th>Qu√© mide</th>
                    </tr>
                    <tr>
                        <td><strong>Vector Similarity</strong></td>
                        <td><span class="badge badge-primary">40%</span></td>
                        <td>Similitud sem√°ntica entre jugador y partido (de Pinecone)</td>
                    </tr>
                    <tr>
                        <td><strong>ELO Compatibility</strong></td>
                        <td><span class="badge badge-primary">20%</span></td>
                        <td>Qu√© tan cerca est√° el ELO del jugador del rango solicitado</td>
                    </tr>
                    <tr>
                        <td><strong>Geographic Distance</strong></td>
                        <td><span class="badge badge-warning">15%</span></td>
                        <td>Distancia f√≠sica en km (decaimiento exponencial)</td>
                    </tr>
                    <tr>
                        <td><strong>Time Availability</strong></td>
                        <td><span class="badge badge-warning">10%</span></td>
                        <td>Overlap entre disponibilidad y horario del partido</td>
                    </tr>
                    <tr>
                        <td><strong>Acceptance Rate</strong></td>
                        <td><span class="badge badge-warning">10%</span></td>
                        <td>Qu√© tan confiable es el jugador (acepta invitaciones)</td>
                    </tr>
                    <tr>
                        <td><strong>Activity Frequency</strong></td>
                        <td><span class="badge badge-success">5%</span></td>
                        <td>Qu√© tan activo es (√∫ltima vez que jug√≥)</td>
                    </tr>
                </table>

                <h3 class="section-subtitle">F√≥rmulas Clave</h3>
                
                <div class="code-block">
<span class="comment"># 1. ELO Compatibility (20%)</span>
elo_center = (elo_range[<span class="number">0</span>] + elo_range[<span class="number">1</span>]) / <span class="number">2</span>
elo_diff = abs(player.elo - elo_center)
elo_tolerance = (elo_range[<span class="number">1</span>] - elo_range[<span class="number">0</span>]) / <span class="number">2</span>
elo_score = max(<span class="number">0</span>, <span class="number">1</span> - elo_diff / elo_tolerance) * <span class="number">0.20</span>

<span class="comment"># 2. Geographic Distance (15%)</span>
distance_km = haversine_distance(player.location, request.location)
distance_score = (<span class="number">1</span> / (<span class="number">1</span> + distance_km / <span class="number">10</span>)) * <span class="number">0.15</span>

<span class="comment"># 3. Acceptance Rate (10%)</span>
acceptance_score = player.acceptance_rate * <span class="number">0.10</span>

<span class="comment"># 4. Activity Frequency (5%)</span>
last_active = player.last_active_days
activity_score = max(<span class="number">0</span>, <span class="number">1</span> - last_active / <span class="number">30</span>) * <span class="number">0.05</span>

<span class="comment"># Score Total</span>
total_score = (
    vector_score + 
    elo_score + 
    distance_score + 
    time_score + 
    acceptance_score + 
    activity_score +
    position_bonus
)
                </div>

                <h3 class="section-subtitle">Thresholds para "Reasons"</h3>
                <div class="grid-2">
                    <div class="card">
                        <h3>‚úÖ Razones Positivas</h3>
                        <ul>
                            <li>vector > 0.85 ‚Üí "Perfil muy compatible"</li>
                            <li>elo_diff < 100 ‚Üí "Nivel muy similar"</li>
                            <li>distance < 3km ‚Üí "Muy cerca del partido"</li>
                            <li>time_overlap = 1.0 ‚Üí "Horario perfecto"</li>
                            <li>acceptance > 0.8 ‚Üí "Alta tasa de aceptaci√≥n"</li>
                            <li>last_active < 3 ‚Üí "Usuario muy activo"</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>‚ö†Ô∏è Penalizaciones</h3>
                        <ul>
                            <li>elo_diff > 300 ‚Üí Penalizaci√≥n fuerte</li>
                            <li>distance > 10km ‚Üí Penalizaci√≥n</li>
                            <li>acceptance < 0.4 ‚Üí Descartar</li>
                            <li>last_active > 30 ‚Üí Penalizaci√≥n</li>
                            <li>Posici√≥n no match ‚Üí -5% bonus</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Secci√≥n 7: Divisi√≥n de Trabajo -->
            <div id="teams" class="section bg-cyan">
                <h2 class="section-title">üë• Divisi√≥n de Trabajo - 4 Teams</h2>

                <div class="grid-2">
                    <div class="card" style="background: #FFE5E5;">
                        <h3>üî¥ TEAM 1: Core Models</h3>
                        <p><strong>Tiempo:</strong> 2 horas</p>
                        <p><strong>Archivos:</strong></p>
                        <ul>
                            <li>src/models/player.py</li>
                            <li>src/models/match_request.py</li>
                            <li>src/models/candidate.py</li>
                        </ul>
                        <p><strong>Tareas:</strong></p>
                        <ul>
                            <li>Definir Pydantic models con validaciones</li>
                            <li>Crear Enums (Category, Position, Gender)</li>
                            <li>Type hints completos</li>
                            <li>Ejemplos en Config</li>
                        </ul>
                    </div>

                    <div class="card" style="background: #E5F6FF;">
                        <h3>üîµ TEAM 2: External Services</h3>
                        <p><strong>Tiempo:</strong> 3 horas</p>
                        <p><strong>Archivos:</strong></p>
                        <ul>
                            <li>src/external/openai_client.py</li>
                            <li>src/external/pinecone_client.py</li>
                            <li>src/database/db_client.py</li>
                        </ul>
                        <p><strong>Tareas:</strong></p>
                        <ul>
                            <li>EmbeddingService con OpenAI</li>
                            <li>VectorStore con Pinecone</li>
                            <li>DatabaseClient con PostgreSQL</li>
                            <li>Manejo de errores y retries</li>
                        </ul>
                    </div>

                    <div class="card" style="background: #E5FFE5;">
                        <h3>üü¢ TEAM 3: IA Matchmaking</h3>
                        <p><strong>Tiempo:</strong> 4 horas</p>
                        <p><strong>Archivos:</strong></p>
                        <ul>
                            <li>src/services/matchmaking_service.py</li>
                            <li>src/services/scoring_service.py</li>
                            <li>src/utils/geo_utils.py</li>
                            <li>src/utils/time_utils.py</li>
                        </ul>
                        <p><strong>Tareas:</strong></p>
                        <ul>
                            <li>Pipeline de 8 pasos completo</li>
                            <li>Algoritmo de scoring con 6 factores</li>
                            <li>Haversine distance calculation</li>
                            <li>Time overlap calculation</li>
                        </ul>
                    </div>

                    <div class="card" style="background: #FFF5E5;">
                        <h3>üü† TEAM 4: API & Seeders</h3>
                        <p><strong>Tiempo:</strong> 3 horas</p>
                        <p><strong>Archivos:</strong></p>
                        <ul>
                            <li>src/routers/matchmaking.py</li>
                            <li>src/seeders/player_seeder.py</li>
                            <li>src/seeders/db_seeder.py</li>
                            <li>src/main.py</li>
                        </ul>
                        <p><strong>Tareas:</strong></p>
                        <ul>
                            <li>Endpoints FastAPI (4 routes)</li>
                            <li>Generar 1000+ jugadores realistas</li>
                            <li>Seed en PostgreSQL y Pinecone</li>
                            <li>CORS y config de app</li>
                        </ul>
                    </div>
                </div>

                <div class="info-box">
                    <strong>üí° Estrategia de paralelizaci√≥n:</strong> Los 4 teams pueden trabajar simult√°neamente si siguen las interfaces definidas en TECHNICAL-SPECS.md. La integraci√≥n final ser√° r√°pida.
                </div>
            </div>

            <!-- Secci√≥n 8: Integraci√≥n -->
            <div id="integracion" class="section bg-peach">
                <h2 class="section-title">üîó Integraci√≥n de Componentes</h2>

                <h3 class="section-subtitle">Dependencias entre Teams</h3>
                <div class="architecture-diagram">
                    <div style="display: flex; justify-content: center; align-items: center; gap: 20px; flex-wrap: wrap;">
                        <div class="arch-box" style="background: #FFE5E5;">Team 1<br>Models</div>
                        <span class="arch-arrow">‚Üí</span>
                        <div class="arch-box" style="background: #E5F6FF;">Team 2<br>External</div>
                        <span class="arch-arrow">‚Üí</span>
                        <div class="arch-box" style="background: #E5FFE5;">Team 3<br>Matchmaking</div>
                        <span class="arch-arrow">‚Üí</span>
                        <div class="arch-box" style="background: #FFF5E5;">Team 4<br>API</div>
                    </div>
                </div>

                <h3 class="section-subtitle">Flujo de Integraci√≥n</h3>
                <div class="timeline">
                    <div class="timeline-item">
                        <strong>Paso 1: Models listos (Team 1)</strong>
                        <p>Todos los dem√°s teams pueden empezar a importar los models y trabajar con type hints.</p>
                    </div>

                    <div class="timeline-item">
                        <strong>Paso 2: External Services (Team 2)</strong>
                        <p>Team 3 puede empezar a llamar a OpenAI, Pinecone y DB. Team 4 puede preparar seeders.</p>
                    </div>

                    <div class="timeline-item">
                        <strong>Paso 3: Business Logic (Team 3)</strong>
                        <p>Team 4 puede importar MatchmakingService y conectarlo a los endpoints.</p>
                    </div>

                    <div class="timeline-item">
                        <strong>Paso 4: API & Seeders (Team 4)</strong>
                        <p>Testing end-to-end, seed 1000 jugadores, verificar todos los endpoints.</p>
                    </div>

                    <div class="timeline-item">
                        <strong>Paso 5: Integraci√≥n Final</strong>
                        <p>Todos juntos: debugging, optimizaci√≥n, preparar demo.</p>
                    </div>
                </div>

                <h3 class="section-subtitle">Interfaces Clave</h3>
                <div class="code-block">
<span class="comment"># Team 2 expone estas interfaces para Team 3</span>
<span class="keyword">class</span> <span class="function">EmbeddingService</span>:
    <span class="keyword">def</span> <span class="function">create_player_embedding</span>(player: Player) -> List[<span class="keyword">float</span>]
    <span class="keyword">def</span> <span class="function">create_request_embedding</span>(request: MatchRequest) -> List[<span class="keyword">float</span>]

<span class="keyword">class</span> <span class="function">VectorStore</span>:
    <span class="keyword">def</span> <span class="function">search_similar</span>(query_embedding, filters, top_k) -> List[<span class="keyword">dict</span>]
    <span class="keyword">def</span> <span class="function">upsert_player</span>(player_id, embedding, metadata)

<span class="comment"># Team 3 expone esta interfaz para Team 4</span>
<span class="keyword">class</span> <span class="function">MatchmakingService</span>:
    <span class="keyword">def</span> <span class="function">find_candidates</span>(request: MatchRequest) -> List[Candidate]
                </div>
            </div>

            <!-- Secci√≥n 9: Roadmap -->
            <div id="roadmap" class="section bg-purple">
                <h2 class="section-title">üöÄ Roadmap de Evoluci√≥n</h2>

                <div class="info-box">
                    <strong>üéØ Visi√≥n:</strong> Empezar con un prototipo funcional (Hackathon) y evolucionar hacia un sistema de IA que aprende continuamente de las interacciones reales.
                </div>

                <div class="timeline">
                    <div class="timeline-item" style="background: #FFE5E5;">
                        <strong>FASE 0: Hackathon (D√≠a 1) ‚úÖ</strong>
                        <ul>
                            <li>Embeddings con OpenAI</li>
                            <li>Scoring multi-dimensional (6 factores)</li>
                            <li>1000+ jugadores mock</li>
                            <li>API REST completa</li>
                            <li>Demo impresionante</li>
                        </ul>
                        <span class="badge badge-warning">Limitaci√≥n: Pesos fijos, sin feedback real</span>
                    </div>

                    <div class="timeline-item" style="background: #E5F6FF;">
                        <strong>FASE 1: Integraci√≥n y Feedback (Semanas 1-2)</strong>
                        <ul>
                            <li>Webhook con PADER server</li>
                            <li>Capturar feedback de invitaciones (aceptadas/rechazadas)</li>
                            <li>Actualizar acceptance_rate en tiempo real</li>
                            <li>Dashboard b√°sico de m√©tricas</li>
                            <li>Sistema de seguimiento autom√°tico de matches</li>
                        </ul>
                        <span class="badge badge-success">Objetivo: 70% precisi√≥n top-3</span>
                    </div>

                    <div class="timeline-item" style="background: #E5FFE5;">
                        <strong>FASE 2: Optimizaci√≥n Autom√°tica (Mes 1)</strong>
                        <ul>
                            <li>A/B testing de diferentes configuraciones de pesos</li>
                            <li>Optimizaci√≥n autom√°tica basada en m√©tricas</li>
                            <li>Rollout gradual de mejores configs</li>
                            <li>Sistema de alertas de performance</li>
                        </ul>
                        <span class="badge badge-success">Objetivo: 80% precisi√≥n, 85% matches completados</span>
                    </div>

                    <div class="timeline-item" style="background: #FFF5E5;">
                        <strong>FASE 3: Aprendizaje Supervisado (Mes 2-3)</strong>
                        <ul>
                            <li>Modelo ML para predecir probabilidad de aceptaci√≥n</li>
                            <li>Integrar predicciones en scoring final</li>
                            <li>Reentrenamiento autom√°tico semanal</li>
                            <li>An√°lisis de patrones de comportamiento</li>
                        </ul>
                        <span class="badge badge-success">Objetivo: 85% precisi√≥n, 90% aceptaci√≥n</span>
                    </div>

                    <div class="timeline-item" style="background: #F5E5FF;">
                        <strong>FASE 4: Fine-tuning Embeddings (Mes 4-6)</strong>
                        <ul>
                            <li>Entrenar embeddings personalizados con feedback real</li>
                            <li>Contrastive learning: matches exitosos vs rechazados</li>
                            <li>Embeddings espec√≠ficos por regi√≥n/categor√≠a</li>
                            <li>Captura de patrones sutiles de compatibilidad</li>
                        </ul>
                        <span class="badge badge-success">Objetivo: 90% precisi√≥n</span>
                    </div>

                    <div class="timeline-item" style="background: #FFFFE5;">
                        <strong>FASE 5: IA Avanzada (Mes 6-12)</strong>
                        <ul>
                            <li>Recomendaciones proactivas (predecir cu√°ndo quiere jugar)</li>
                            <li>Optimizaci√≥n de grupos (mejor cuarteto posible)</li>
                            <li>Predicci√≥n de cancelaciones</li>
                            <li>Sugerencias de horarios √≥ptimos</li>
                        </ul>
                        <span class="badge badge-primary">Objetivo: 95% precisi√≥n, experiencia m√°gica</span>
                    </div>
                </div>

                <h3 class="section-subtitle">Evoluci√≥n de M√©tricas</h3>
                <table>
                    <tr>
                        <th>M√©trica</th>
                        <th>Hackathon</th>
                        <th>Fase 1</th>
                        <th>Fase 3</th>
                        <th>Fase 5</th>
                    </tr>
                    <tr>
                        <td>Latencia</td>
                        <td><200ms</td>
                        <td><150ms</td>
                        <td><100ms</td>
                        <td><50ms</td>
                    </tr>
                    <tr>
                        <td>Precisi√≥n Top-3</td>
                        <td>60%</td>
                        <td>70%</td>
                        <td>85%</td>
                        <td>95%</td>
                    </tr>
                    <tr>
                        <td>Tasa Aceptaci√≥n</td>
                        <td>N/A</td>
                        <td>45%</td>
                        <td>70%</td>
                        <td>90%</td>
                    </tr>
                    <tr>
                        <td>Satisfacci√≥n</td>
                        <td>N/A</td>
                        <td>3.5/5</td>
                        <td>4.2/5</td>
                        <td>4.8/5</td>
                    </tr>
                </table>
            </div>

            <!-- Secci√≥n 10: Checklist -->
            <div id="checklist" class="section bg-blue">
                <h2 class="section-title">‚úÖ Checklist de Desarrollo</h2>

                <h3 class="section-subtitle">Pre-Hackathon</h3>
                <div class="card">
                    <ul>
                        <li>‚òê Crear cuenta OpenAI y obtener API key</li>
                        <li>‚òê Crear cuenta Pinecone y crear √≠ndice (1536 dims, cosine)</li>
                        <li>‚òê Instalar Docker Desktop</li>
                        <li>‚òê Clonar repo y crear estructura de carpetas</li>
                        <li>‚òê Configurar .env con todas las keys</li>
                        <li>‚òê Levantar PostgreSQL en Docker</li>
                        <li>‚òê Crear tabla players en DB</li>
                        <li>‚òê Instalar dependencias (requirements.txt)</li>
                    </ul>
                </div>

                <h3 class="section-subtitle">Durante Hackathon</h3>
                <div class="grid-2">
                    <div class="card" style="background: #FFE5E5;">
                        <h3>üî¥ Team 1 (2h)</h3>
                        <ul>
                            <li>‚òê Player model</li>
                            <li>‚òê MatchRequest model</li>
                            <li>‚òê Candidate model</li>
                            <li>‚òê Enums (Category, Gender, Position)</li>
                            <li>‚òê Validaciones y type hints</li>
                        </ul>
                    </div>

                    <div class="card" style="background: #E5F6FF;">
                        <h3>üîµ Team 2 (3h)</h3>
                        <ul>
                            <li>‚òê OpenAI client (embeddings)</li>
                            <li>‚òê Pinecone client (vector search)</li>
                            <li>‚òê Database client (PostgreSQL)</li>
                            <li>‚òê Config management</li>
                            <li>‚òê Error handling</li>
                        </ul>
                    </div>

                    <div class="card" style="background: #E5FFE5;">
                        <h3>üü¢ Team 3 (4h)</h3>
                        <ul>
                            <li>‚òê MatchmakingService (pipeline 8 pasos)</li>
                            <li>‚òê ScoringService (6 factores)</li>
                            <li>‚òê Geo utils (haversine)</li>
                            <li>‚òê Time utils (overlap)</li>
                            <li>‚òê Integration testing</li>
                        </ul>
                    </div>

                    <div class="card" style="background: #FFF5E5;">
                        <h3>üü† Team 4 (3h)</h3>
                        <ul>
                            <li>‚òê FastAPI app setup</li>
                            <li>‚òê Matchmaking router (4 endpoints)</li>
                            <li>‚òê PlayerSeeder (1000+ jugadores)</li>
                            <li>‚òê DBSeeder (PostgreSQL insert)</li>
                            <li>‚òê CORS y middleware</li>
                        </ul>
                    </div>
                </div>

                <h3 class="section-subtitle">Testing y Demo</h3>
                <div class="card">
                    <ul>
                        <li>‚òê Todos los endpoints responden correctamente</li>
                        <li>‚òê Seed de 1000 jugadores exitoso</li>
                        <li>‚òê B√∫squeda de candidatos funciona (<200ms)</li>
                        <li>‚òê Scores en rango correcto (0.0-1.0)</li>
                        <li>‚òê Reasons generados correctamente</li>
                        <li>‚òê Mensajes personalizados generados</li>
                        <li>‚òê Documentaci√≥n Swagger (http://localhost:8000/docs)</li>
                        <li>‚òê Preparar request de demo realista</li>
                        <li>‚òê Presentaci√≥n de 8 minutos lista</li>
                    </ul>
                </div>

                <h3 class="section-subtitle">Comandos de Verificaci√≥n</h3>
                <div class="code-block">
<span class="comment"># Levantar PostgreSQL</span>
docker-compose up -d

<span class="comment"># Verificar que est√° corriendo</span>
docker ps

<span class="comment"># Levantar FastAPI</span>
uvicorn src.main:app --reload

<span class="comment"># Health check</span>
curl http://localhost:8000/api/matchmaking/health

<span class="comment"># Seed jugadores</span>
curl -X POST http://localhost:8000/api/matchmaking/seed_players/1000

<span class="comment"># Buscar candidatos</span>
curl -X POST http://localhost:8000/api/matchmaking/find_candidates \
  -H <span class="string">"Content-Type: application/json"</span> \
  -d @test_request.json
                </div>
            </div>

            <!-- Secci√≥n Final: Resumen -->
            <div class="section" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                <h2 class="section-title" style="color: white;">üéØ Resumen Ejecutivo</h2>
                
                <div class="grid-3">
                    <div>
                        <h3 style="color: #FFE5E5;">üöÄ Qu√© Construimos</h3>
                        <p>Microservicio de matchmaking con IA que usa embeddings sem√°nticos y scoring multi-dimensional para encontrar los mejores candidatos autom√°ticamente.</p>
                    </div>
                    <div>
                        <h3 style="color: #E5F6FF;">‚ö° C√≥mo Funciona</h3>
                        <p>Pipeline de 8 pasos: embedding ‚Üí b√∫squeda vectorial ‚Üí filtros ‚Üí enriquecimiento ‚Üí scoring ‚Üí ordenamiento ‚Üí invitaciones autom√°ticas.</p>
                    </div>
                    <div>
                        <h3 style="color: #E5FFE5;">üìà Impacto</h3>
                        <p>De 40% a 85%+ matches completados. De 2 horas a 15 minutos. Experiencia m√°gica para usuarios.</p>
                    </div>
                </div>

                <div style="margin-top: 30px; text-align: center;">
                    <h3 style="color: white; margin-bottom: 15px;">Stack Tecnol√≥gico</h3>
                    <div>
                        <span class="badge" style="background: white; color: #667eea; font-size: 1em; padding: 10px 20px; margin: 5px;">FastAPI</span>
                        <span class="badge" style="background: white; color: #667eea; font-size: 1em; padding: 10px 20px; margin: 5px;">OpenAI Embeddings</span>
                        <span class="badge" style="background: white; color: #667eea; font-size: 1em; padding: 10px 20px; margin: 5px;">Pinecone Vector DB</span>
                        <span class="badge" style="background: white; color: #667eea; font-size: 1em; padding: 10px 20px; margin: 5px;">PostgreSQL</span>
                        <span class="badge" style="background: white; color: #667eea; font-size: 1em; padding: 10px 20px; margin: 5px;">Pydantic</span>
                    </div>
                </div>

                <div style="margin-top: 30px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 10px;">
                    <h3 style="color: white; text-align: center;">üí° Diferenciadores Clave</h3>
                    <ul style="columns: 2; column-gap: 30px; margin-top: 15px;">
                        <li>üß† IA real con embeddings sem√°nticos</li>
                        <li>‚ö° Scoring multi-dimensional (6 factores)</li>
                        <li>üéØ Prioriza jugadores confiables</li>
                        <li>üöÄ Invitaciones autom√°ticas</li>
                        <li>üìä Escalable a millones de jugadores</li>
                        <li>üîÑ Preparado para aprendizaje continuo</li>
                    </ul>
                </div>
            </div>

        </div>
    </div>

    <script>
        // Smooth scroll para links internos
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Animaci√≥n de entrada para secciones
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '0';
                    entry.target.style.transform = 'translateY(20px)';
                    setTimeout(() => {
                        entry.target.style.transition = 'all 0.6s ease';
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }, 100);
                }
            });
        });

        document.querySelectorAll('.section').forEach(section => {
            observer.observe(section);
        });
    </script>
</body>
</html>
